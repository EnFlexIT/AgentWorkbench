<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="javadoc-create">

	<tstamp><format property="TODAYS_YEAR" pattern="yyyy"/></tstamp>
	<property name="javadocExec" value="C:/Program Files/Java/jdk1.7.0_79/bin/javadoc.exe" />
	
	<property name="destinDir" value="doc" />
	<property name="destinDirAPI" value="${destinDir}\api\\" />
	<property name="destinDirIMG" value="${destinDir}\img\\" />

	<!-- Get the version info -->
	<property name="versionPropertyFile" value="src\agentgui\version.properties"/>
	<property name="versionBuildNumberFile" value="src\agentgui\build.number"/>
		
	<property prefix="old" file="${versionPropertyFile}"/>
	<property name="version.major" value="${old.version.major}"/>
	<property name="version.minor" value="${old.version.minor}"/>
	
	<property file="${versionBuildNumberFile}"/>
	<property name="version.build" value="${build.number}"/>
				
	<property name="doc.title" value="Agent.GUI - Documentation (Version ${version.major}.${version.minor} Build ${version.build})"/> 
	<property name="zip.namePrefix" value="Agent.GUI_"/>
	<property name="zip.name" value="${zip.namePrefix}${version.major}.${version.minor}_API.zip"/>
	
		
	<target name="javadoc-create" depends="" description="Creating javadoc ... ">
		<echo>Build: ${doc.title}</echo>
		<antcall target="cleanup"/>
		<antcall target="javadoc"/>
		<antcall target="javadoc-zip"/>
	</target>
	
	<target name="cleanup" description="Delete old API folder structure ...">
		<delete failonerror="false" dir="${destinDirAPI}" />    	    	
	</target>	
	
	<target name="javadoc">
		
		<!-- Build the API -->
		<!-- Here the follwing attribute setting was removed after 'packagenames': 'executable="${javadocExec}'" -->
		<javadoc access="package" 
			author="true" 
			source="1.7" 
			sourcepath="projects;src" 
			destdir="${destinDirAPI}" 
			doctitle="${doc.title}" 
			nodeprecated="false" 
			nodeprecatedlist="false" 
			noindex="false" 
			nonavbar="false" 
			notree="false" 
			splitindex="true" 
			use="true" 
			version="true"
			packagenames="agentgui.,jade."
			
			classpath= "lib;
						lib/jade/lib/commons-codec/commons-codec-1.3.jar;
						lib/jade/lib/jade.jar;
						lib/jade/lib/migration.jar;
						lib/jade/lib/XMLCodec.jar;
						lib/jdbc/mysql-connector-java-5.0.8-bin.jar;
						lib/google-api-translate-java-0.92.jar;
						lib/scimark2lib.jar;
						lib/hyperic-sigar/sigar-bin/lib/log4j.jar;
						lib/hyperic-sigar/sigar-bin/lib/sigar.jar;
						lib/jFreeChart/iText-2.1.5.jar;
						lib/jFreeChart/jcommon-1.0.18.jar;
						lib/jFreeChart/jfreechart-1.0.15.jar;
						lib/jep-2.3.1/jep-2.3.1.jar;
						lib/jung/collections-generic-4.01.jar;
						lib/jung/colt-1.2.0.jar;
						lib/jung/jung-samples-2.0.1.jar;
						lib/jung/jung-algorithms-2.0.1.jar;
						lib/jung/jung-api-2.0.1.jar;
						lib/jung/jung-graph-impl-2.0.1.jar;
						lib/jung/jung-io-2.0.1.jar;
						lib/jung/jung-jai-2.0.1.jar;
						lib/jung/jung-visualization-2.0.1.jar;
						lib/jung/stax-api-1.0.1.jar;
						lib/jung/vecmath-1.3.1.jar;
						lib/jung/wstx-asl-3.2.6.jar;
						lib/oidc/activation-1.1.jar;
						lib/oidc/commons-collections4-4.1.jar;
						lib/oidc/commons-io-2.5.jar;
						lib/oidc/commons-lang3-3.4.jar;
						lib/oidc/jcip-annotations-1.0-1.jar;
						lib/oidc/json-smart-1.3.1.jar;
						lib/oidc/lang-tag-1.4.3.jar;
						lib/oidc/mail-1.4.7.jar;
						lib/oidc/nimbus-jose-jwt-4.26.1.jar;
						lib/oidc/oauth2-oidc-sdk-5.17.1.jar;"	
			
			>
		
			<bottom><![CDATA[<i>Copyright &copy; 2009-${TODAYS_YEAR} by Christian Derksen & DAWIS @ ICB - University Duisburg-Essen. All Rights Reserved.</i>]]></bottom>
			<!-- TODO <link offline="true" href="../../lib/jade/doc/JADE-doc-4.3.2.zip" packagelistloc="./jade/doc" /> -->
			
		</javadoc>	
	</target>

	<target name="javadoc-zip" description="Zipping API">
		<!-- Create Zip file -->
		<zip destfile="${destinDir}/${zip.name}">
			<fileset dir="${destinDirAPI}" />
		</zip>		
		<!-- Remove old file, if there -->
		<delete failonerror="false"> 
			<fileset dir="${destinDirAPIzip}" defaultexcludes="false">
			   <include name="**/${zip.namePrefix}*/**" />
			</fileset>
		</delete>
		<!-- Move Zip file -->
		<move file="${destinDir}/${zip.name}" tofile="${destinDirAPI}/${zip.name}" />
	</target>
	
</project>
