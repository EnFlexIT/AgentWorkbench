<?xml version="1.0" encoding="UTF-8"?>
<!-- ====================================================================== 
     13.07.2009 12:00:00                                                        

     project:		AgentGUI
     description	Erzeugung notwendiger Datei- und Verzeichnisstrukturen
					für das Tool Agent.GUI ....
                   
     Christian Derksen                                                                
     ====================================================================== -->
<project name="AgentGui" default="supply" basedir=".">

	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
          properties: Wichtige Verzeichniseinstellungen                      
         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
	<property name="sourceDir" value="src" />
	<property name="sourceDirLibraries" value="lib" />
	<property name="sourceDirProperties" value="properties" />
	<property name="sourceDirImages" value="src\img" />
	
	<property name="binaryDir" value="bin" />
	<property name="binaryDirANT" value="build" />
	<property name="binaryDirIMG" value="build\img" />
	
	<property name="destinDir" value="D:\00 Tmp\00 Jars\AgentGUI\\" />
	<property name="destinJar" value="${destinDir}\AgentGui.jar" />		
	<property name="destinDirLibraries" value="${destinDir}\lib\\" />
	<property name="destinDirProperties" value="${destinDir}\properties\\" />
	<property name="destinDirProjects" value="${destinDir}\projects\\" />
	
	<!-- Jar's für den Class-Path im Manifest  -->
	<property name="destinClassPath" 
		     value="lib/batik/batik-rasterizer.jar
					lib/batik/batik-slideshow.jar
					lib/batik/batik-squiggle.jar
					lib/batik/batik-svgpp.jar
					lib/batik/batik-ttf2svg.jar
					lib/batik/batik.jar
					lib/jade/lib/http.jar
					lib/jade/lib/iiop.jar
					lib/jade/lib/jade.jar
					lib/jade/lib/jadeTools.jar
					lib/jade/lib/migration.jar
					lib/jade/lib/XMLCodec.jar
					lib/jade/lib/commons-codec/commons-codec-1.3.jar" />
	
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
          target: cleanup => Aufräumen, bevor es wirklich los geht                      
         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <target name="cleanup" description="Löschen der alten Datei- und Verzeichnisstruktur ...">
    	<delete failonerror="false" dir="${binaryDirANT}" />    	    	
    </target>
	
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
          target: createdir => Anlegen der Verzeichnisstruktur                      
         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <target name="createdir" description="Erstellung der Verzeichnisstruktur ...">
    	<mkdir dir="${destinDir}" />  	
    	<mkdir dir="${destinDirLibraries}" />
    	<mkdir dir="${destinDirProperties}" />
    	<mkdir dir="${destinDirProjects}" />
    </target>
	
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
          target: compile => Anlegen der Verzeichnisstruktur                      
         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <target name="compile" description="Erzeugung des Byte-Codes ...">
    	
    	<delete failonerror="false" dir="${binaryDirANT}" />
    	<mkdir dir="${binaryDirANT}" />    	
    	
    	<path id="class.path">
    	  <fileset dir="lib">
    	    <include name="**/*.jar" />
    	  </fileset>
    	</path>

    	<echo message="Compile: Java-Version ${ant.java.version}" />
    	<javac destdir="${binaryDirANT}" encoding="iso-8859-1">    		
    		<src path="${sourceDir}" />
    		<classpath refid="class.path" />
    	</javac>
    	<copy todir="${binaryDirIMG}">
    		<fileset dir="${sourceDirImages}" />
    	</copy>  
    	
    </target>
	
	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
          target: supply => .jar-externe Dateien' verschieben
          				 => Erzeugung der ausführbaren Struktur              
         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <target name="supply" depends="cleanup,createdir,compile" description="Erstellung der Dateistruktur ... ">
    	
    	<!-- Kopieren der Property-Files -->    	
    	<copy todir="${destinDirProperties}">
    		<fileset dir="${sourceDirProperties}" />
		</copy>   	
    	
    	<!-- Kopieren der Library-Files -->    	
    	<copy todir="${destinDirLibraries}">
    		<fileset dir="${sourceDirLibraries}" />
		</copy>   	
    	
    	<!-- Erzeugen der ausführbaren Java-Datei -->
    	<jar compress="true" destfile="${destinJar}">
 			<manifest>
				<attribute name="Built-By" value="${user.name}"/>
 				<attribute name="Built-Lang" value="${user.language}"/>
    		    <attribute name="Main-Class" value="application.Application"/>
 				<attribute name="Class-Path" value="${destinClassPath}"/> 				
			</manifest>    		
    		<fileset dir="${binaryDirANT}">
    			<!-- <exclude name="**/mas/projects/**" /> -->    			
    		</fileset>    		
        </jar>
    	
    	<!-- Die einzelnen Projekte kompilieren -->
    	
    	
    	
    	
    	<!-- Die erzeugte jar ausführen -->
    	<java jar="${destinJar}" fork="true" />
    	
    </target>

</project>
